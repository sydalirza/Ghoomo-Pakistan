<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contact Us</title>
  <link rel="icon" href="Images/icon.png">
  <link rel="stylesheet" type="text/css" href="CSS/style.css">
  <link href='https://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet'>
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=PT+Sans:ital,wght@1,700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=PT+Sans:ital,wght@1,700&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=PT+Sans:ital,wght@1,700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="whitearea">
    <header>
      <h1>
        <a href="index.html">Ghoomo Pakistan</a>
      </h1>
    </header>

    <nav id="navbar">
      <ul>
        <li><a href="index.html"> Home </a></li>
        <li>
          <div class="dropdown">
            <button class="dropbtn">Destinations <i class="arrow down"></i></button>
            <div class="dropdown-content">
              <a href="punjab.html">Punjab</a>
              <a href="sindh.html">Sindh</a>
              <a href="balochistan.html">Balochistan</a>
              <a href="kpk.html">Khyber Pakhtunkwa</a>
              <a href="gilgit.html">Gilgit-Baltistan</a>
              <a href="kashmir.html">Azad Kashmir</a>
            </div>
          </div>
        </li>
        <li><a href="#"> Contact Us </a></li>
        <li><a href="aboutus.html"> About Us </a></li>
        <li>
          <div class="dropdown">
            <button class="dropbtn">More <i class="arrow down"></i></button>
            <div class="dropdown-content">
              <a href="sitemap.html">Site Map</a>
            </div>
          </div>
        </li>
      </ul>
    </nav>

    <section>
      <div id="welcome">
        <h2>Contact Us</h2>
        <div id="query" style="text-align:left">
          <p>Leave us a message if you have any query:</p>
        </div>
      </div>

      <div class="row">
        <div class="column">
          <form name="query" action="thanks.html" onsubmit="return validateForm()" method="post">
            <label for="fname">First Name</label>
            <input type="text" id="fname" name="firstname" placeholder="Your first name..">
            <label for="lname">Last Name</label>
            <input type="text" id="lname" name="lastname" placeholder="Your last name..">
            <label for="Email">Email</label>
            <input type="text" id="Email" name="Email" placeholder="Email">
            <label for="subject">Query/Complaint</label>
            <textarea id="subject" name="subject" placeholder="Query/Complaint" style="height:170px"></textarea>
            <div id="sub">
              <input type="submit" value="SUBMIT">
            </div>
          </form>
        </div>
      </div>
    </div>

    <section id="Elecmail">
      <h2> You can also reach us at </h2>
      <h3><a href="mailto:ghoomopakistan007@gmail.com">ghoomopakistan007@gmail.com</a></h3>
    </section>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.0/firebase-analytics-compat.js";
    import { getDatabase } from "https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js";

    const firebaseConfig = {
    apiKey: "AIzaSyCI_FFF13hibu1ZhA7Nd6g9AyrrOgvcMsI",
    authDomain: "ghoomo-pakistan-ed1e2.firebaseapp.com",
    databaseURL: "https://ghoomo-pakistan-ed1e2-default-rtdb.firebaseio.com",
    projectId: "ghoomo-pakistan-ed1e2",
    storageBucket: "ghoomo-pakistan-ed1e2.appspot.com",
    messagingSenderId: "286370781855",
    appId: "1:286370781855:web:999fef167d6144eaaba0aa",
    measurementId: "G-94S8CKGD71"
  };

    const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const database = getDatabase(app);

  function validateForm() {
    const firstName = document.forms["query"]["firstname"].value;
    const lastName = document.forms["query"]["lastname"].value;
    const email = document.forms["query"]["Email"].value;
    const query = document.forms["query"]["subject"].value;

    // Basic validation
    if (firstName === "" || lastName === "" || email === "" || query === "") {
      alert("All fields must be filled out");
      return false;
    }

    // Email validation using a simple regular expression
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
      alert("Please enter a valid email address");
      return false;
    }

    // If the form is valid, save data to the database
    saveToDatabase();

    // Prevent the form from submitting (since we're handling submission with JavaScript)
    return false;
  }

  function saveToDatabase() {
    const firstName = document.forms["query"]["firstname"].value;
    const lastName = document.forms["query"]["lastname"].value;
    const email = document.forms["query"]["Email"].value;
    const query = document.forms["query"]["subject"].value;

    const newQueryRef = push(ref(database, 'queries'));

    set(newQueryRef, {
      firstName: firstName,
      lastName: lastName,
      email: email,
      query: query
    }).then(() => {
      alert("Form submitted successfully!");
    }).catch((error) => {
      console.error("Error saving data to database:", error);
    });
  }
  </script>
</body>
</html>
